<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAT Study Master - Complete Study App</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .header h1 {
            font-size: 2.5rem;
            color: #4a5568;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1rem;
            color: #718096;
        }

        .progress-section {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .progress-bar {
            background: #e2e8f0;
            height: 20px;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .progress-fill {
            background: linear-gradient(90deg, #48bb78, #38a169);
            height: 100%;
            width: 0%;
            transition: width 0.5s ease;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .stat-card {
            background: linear-gradient(135deg, #4299e1, #3182ce);
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .timer-section {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
        }

        .timer-display {
            font-size: 2rem;
            font-weight: bold;
            color: #4a5568;
            margin: 15px 0;
        }

        .timer-controls button {
            background: #4299e1;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            margin: 0 5px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .timer-controls button:hover {
            background: #3182ce;
        }

        .topics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .topic-card {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
        }

        .topic-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .topic-card.completed {
            border-left: 5px solid #48bb78;
        }

        .topic-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 15px;
        }

        .topic-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #4a5568;
            margin-bottom: 5px;
        }

        .topic-category {
            background: #edf2f7;
            color: #4a5568;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-left: auto;
        }

        .topic-description {
            color: #718096;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .topic-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .btn-primary {
            background: #4299e1;
            color: white;
        }

        .btn-primary:hover {
            background: #3182ce;
        }

        .btn-secondary {
            background: #edf2f7;
            color: #4a5568;
        }

        .btn-secondary:hover {
            background: #e2e8f0;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #718096;
        }

        .question-card {
            background: #f7fafc;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .question-text {
            font-weight: bold;
            margin-bottom: 15px;
        }

        .answers {
            display: grid;
            gap: 10px;
        }

        .answer-option {
            background: white;
            border: 2px solid #e2e8f0;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .answer-option:hover {
            border-color: #4299e1;
        }

        .answer-option.selected {
            border-color: #4299e1;
            background: #ebf8ff;
        }

        .answer-option.correct {
            border-color: #48bb78;
            background: #f0fff4;
        }

        .answer-option.incorrect {
            border-color: #f56565;
            background: #fff5f5;
        }

        .quiz-controls {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .quiz-progress {
            text-align: center;
            color: #718096;
        }

        @media (max-width: 768px) {
            .topics-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🎓 SAT Study Master</h1>
            <p>Complete study app for all 12 essential SAT topics</p>
        </div>

        <div class="progress-section">
            <h3>Overall Progress</h3>
            <div class="progress-bar">
                <div class="progress-fill" id="overallProgress"></div>
            </div>
            <div class="stats">
                <div class="stat-card">
                    <h4>Topics Completed</h4>
                    <p id="completedTopics">0 / 12</p>
                </div>
                <div class="stat-card">
                    <h4>Study Time</h4>
                    <p id="totalStudyTime">0 min</p>
                </div>
                <div class="stat-card">
                    <h4>Quiz Score</h4>
                    <p id="averageScore">0%</p>
                </div>
                <div class="stat-card">
                    <h4>Streak</h4>
                    <p id="studyStreak">0 days</p>
                </div>
            </div>
        </div>

        <div class="timer-section">
            <h3>Study Timer</h3>
            <div class="timer-display" id="timerDisplay">25:00</div>
            <div class="timer-controls">
                <button onclick="startTimer()">Start</button>
                <button onclick="pauseTimer()">Pause</button>
                <button onclick="resetTimer()">Reset</button>
                <button onclick="setTimer(25)">25 min</button>
                <button onclick="setTimer(50)">50 min</button>
            </div>
        </div>

        <div class="topics-grid" id="topicsGrid">
            <!-- Topics will be populated by JavaScript -->
        </div>
    </div>

    <!-- Modal for detailed study and quizzes -->
    <div class="modal" id="studyModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Topic Study</h3>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <div id="modalContent">
                <!-- Content will be populated dynamically -->
            </div>
        </div>
    </div>

    <script>
        // App state
        let appState = {
            completedTopics: new Set(),
            studyTime: 0,
            quizScores: [],
            streak: 0,
            timerInterval: null,
            currentTime: 25 * 60, // 25 minutes in seconds
            isTimerRunning: false,
            currentQuiz: null,
            currentQuestionIndex: 0
        };

        // SAT Topics data
        const satTopics = [
            {
                id: 1,
                title: "Advanced Vocabulary in Context",
                category: "Reading & Writing",
                description: "Master high-frequency SAT words and practice determining word meanings from context clues.",
                content: `
                    <h4>Key Strategies:</h4>
                    <ul>
                        <li>Use context clues to determine word meanings</li>
                        <li>Focus on word roots, prefixes, and suffixes</li>
                        <li>Practice with high-frequency SAT vocabulary</li>
                        <li>Learn words in context, not isolation</li>
                    </ul>
                    <h4>Common SAT Vocabulary Patterns:</h4>
                    <p>Words often tested include: ambiguous, pragmatic, substantiate, volatile, meticulous, eloquent, profound, and empirical.</p>
                `,
                quiz: [
                    {
                        question: "In context, 'pragmatic' most nearly means:",
                        answers: ["Practical", "Theoretical", "Emotional", "Artistic"],
                        correct: 0,
                        explanation: "Pragmatic refers to being practical and realistic in approach."
                    },
                    {
                        question: "Which word means 'to support with evidence'?",
                        answers: ["Refute", "Substantiate", "Contradict", "Speculate"],
                        correct: 1,
                        explanation: "Substantiate means to provide evidence to support or prove the truth of something."
                    }
                ]
            },
            {
                id: 2,
                title: "Rhetorical Analysis Skills",
                category: "Reading & Writing",
                description: "Learn to identify author's purpose, tone, and persuasive techniques in complex passages.",
                content: `
                    <h4>Key Elements to Analyze:</h4>
                    <ul>
                        <li>Author's purpose and main argument</li>
                        <li>Tone and attitude</li>
                        <li>Rhetorical devices (metaphor, analogy, etc.)</li>
                        <li>Structure and organization</li>
                    </ul>
                    <h4>Common Rhetorical Techniques:</h4>
                    <p>Appeals to ethos (credibility), pathos (emotion), and logos (logic). Also watch for repetition, parallel structure, and rhetorical questions.</p>
                `,
                quiz: [
                    {
                        question: "What is the primary purpose of using rhetorical questions?",
                        answers: ["To gather information", "To engage the reader and emphasize a point", "To show confusion", "To end an argument"],
                        correct: 1,
                        explanation: "Rhetorical questions engage readers and emphasize points without expecting literal answers."
                    }
                ]
            },
            {
                id: 3,
                title: "Evidence-Based Reading",
                category: "Reading & Writing",
                description: "Practice finding specific textual evidence that supports conclusions.",
                content: `
                    <h4>Evidence Analysis Steps:</h4>
                    <ul>
                        <li>Identify the claim or conclusion</li>
                        <li>Locate specific supporting details</li>
                        <li>Evaluate the strength of evidence</li>
                        <li>Consider alternative interpretations</li>
                    </ul>
                    <h4>Types of Evidence:</h4>
                    <p>Statistics, expert opinions, examples, analogies, and direct quotes. Always look for the most relevant and strongest evidence.</p>
                `,
                quiz: [
                    {
                        question: "What makes evidence 'strong' in supporting a claim?",
                        answers: ["It's from a recent source", "It's specific and directly relevant", "It's written by a famous author", "It uses complex vocabulary"],
                        correct: 1,
                        explanation: "Strong evidence is specific, directly relevant to the claim, and comes from credible sources."
                    }
                ]
            },
            {
                id: 4,
                title: "Grammar and Usage Mastery",
                category: "Reading & Writing",
                description: "Focus on comma usage, subject-verb agreement, pronoun consistency, and parallel structure.",
                content: `
                    <h4>Essential Grammar Rules:</h4>
                    <ul>
                        <li>Subject-verb agreement</li>
                        <li>Comma rules (lists, clauses, appositives)</li>
                        <li>Pronoun-antecedent agreement</li>
                        <li>Parallel structure in lists and comparisons</li>
                    </ul>
                    <h4>Common Mistakes:</h4>
                    <p>Watch for misplaced modifiers, comma splices, and pronoun ambiguity. Practice identifying the subject in complex sentences.</p>
                `,
                quiz: [
                    {
                        question: "Which sentence demonstrates correct parallel structure?",
                        answers: ["I like swimming, running, and to bike", "I like swimming, running, and biking", "I like to swim, running, and biking", "I like swimming, to run, and biking"],
                        correct: 1,
                        explanation: "Parallel structure requires using the same grammatical form for items in a series."
                    }
                ]
            },
            {
                id: 5,
                title: "Data Interpretation from Graphs",
                category: "Reading & Writing",
                description: "Develop skills in reading and analyzing charts, graphs, and tables.",
                content: `
                    <h4>Graph Types:</h4>
                    <ul>
                        <li>Line graphs (trends over time)</li>
                        <li>Bar charts (comparisons)</li>
                        <li>Pie charts (parts of a whole)</li>
                        <li>Scatter plots (relationships)</li>
                    </ul>
                    <h4>Analysis Steps:</h4>
                    <p>Read titles and labels, identify trends, compare data points, and draw supported conclusions.</p>
                `,
                quiz: [
                    {
                        question: "What type of graph best shows change over time?",
                        answers: ["Pie chart", "Line graph", "Bar chart", "Venn diagram"],
                        correct: 1,
                        explanation: "Line graphs are ideal for showing changes and trends over time periods."
                    }
                ]
            },
            {
                id: 6,
                title: "Cross-Textual Analysis",
                category: "Reading & Writing",
                description: "Practice comparing and contrasting ideas, themes, and arguments across paired passages.",
                content: `
                    <h4>Comparison Strategies:</h4>
                    <ul>
                        <li>Identify each author's main argument</li>
                        <li>Note areas of agreement and disagreement</li>
                        <li>Compare evidence and reasoning</li>
                        <li>Analyze different perspectives on the same topic</li>
                    </ul>
                    <h4>Key Question Types:</h4>
                    <p>How would Author A respond to Author B's claim? What evidence do both authors share? Where do they differ most significantly?</p>
                `,
                quiz: [
                    {
                        question: "When comparing two passages, what should you focus on first?",
                        answers: ["The writing style", "The main argument of each passage", "The length of each passage", "The publication date"],
                        correct: 1,
                        explanation: "Understanding each passage's main argument is essential before comparing specific details."
                    }
                ]
            },
            {
                id: 7,
                title: "Advanced Algebraic Concepts",
                category: "Math",
                description: "Master systems of equations, quadratic functions, and polynomial operations.",
                content: `
                    <h4>Key Topics:</h4>
                    <ul>
                        <li>Solving systems of linear equations</li>
                        <li>Quadratic equations and functions</li>
                        <li>Exponential growth and decay</li>
                        <li>Polynomial operations and factoring</li>
                    </ul>
                    <h4>Common Formulas:</h4>
                    <p>Quadratic formula: x = (-b ± √(b²-4ac)) / 2a<br>
                    Exponential growth: y = a(1+r)^t</p>
                `,
                quiz: [
                    {
                        question: "What is the solution to the system: x + y = 5, x - y = 1?",
                        answers: ["x = 3, y = 2", "x = 2, y = 3", "x = 4, y = 1", "x = 1, y = 4"],
                        correct: 0,
                        explanation: "Adding the equations: 2x = 6, so x = 3. Substituting: 3 + y = 5, so y = 2."
                    }
                ]
            },
            {
                id: 8,
                title: "Functions and Their Properties",
                category: "Math",
                description: "Understand function notation, transformations, and interpreting function graphs.",
                content: `
                    <h4>Function Concepts:</h4>
                    <ul>
                        <li>Function notation: f(x)</li>
                        <li>Domain and range</li>
                        <li>Function transformations</li>
                        <li>Interpreting graphs in context</li>
                    </ul>
                    <h4>Transformations:</h4>
                    <p>f(x) + k: vertical shift<br>
                    f(x + h): horizontal shift<br>
                    af(x): vertical stretch/compression</p>
                `,
                quiz: [
                    {
                        question: "If f(x) = 2x + 3, what is f(4)?",
                        answers: ["8", "11", "14", "5"],
                        correct: 1,
                        explanation: "f(4) = 2(4) + 3 = 8 + 3 = 11"
                    }
                ]
            },
            {
                id: 9,
                title: "Statistics and Data Analysis",
                category: "Math",
                description: "Learn measures of center and spread, correlation vs. causation, and probability.",
                content: `
                    <h4>Key Concepts:</h4>
                    <ul>
                        <li>Mean, median, mode</li>
                        <li>Range, standard deviation</li>
                        <li>Correlation vs. causation</li>
                        <li>Probability calculations</li>
                    </ul>
                    <h4>Important Distinctions:</h4>
                    <p>Correlation does not imply causation. Sample vs. population. Bias in data collection.</p>
                `,
                quiz: [
                    {
                        question: "What's the median of: 2, 7, 3, 9, 5?",
                        answers: ["3", "5", "7", "9"],
                        correct: 1,
                        explanation: "First sort: 2, 3, 5, 7, 9. The median is the middle value: 5."
                    }
                ]
            },
            {
                id: 10,
                title: "Geometry and Trigonometry",
                category: "Math",
                description: "Focus on area/volume formulas, coordinate geometry, and basic trigonometric ratios.",
                content: `
                    <h4>Essential Formulas:</h4>
                    <ul>
                        <li>Area: rectangles, triangles, circles</li>
                        <li>Volume: rectangular prisms, cylinders</li>
                        <li>Pythagorean theorem</li>
                        <li>Basic trig ratios: sin, cos, tan</li>
                    </ul>
                    <h4>Coordinate Geometry:</h4>
                    <p>Distance formula: d = √[(x₂-x₁)² + (y₂-y₁)²]<br>
                    Slope: m = (y₂-y₁)/(x₂-x₁)</p>
                `,
                quiz: [
                    {
                        question: "What's the area of a triangle with base 6 and height 8?",
                        answers: ["24", "48", "14", "32"],
                        correct: 0,
                        explanation: "Area of triangle = (1/2) × base × height = (1/2) × 6 × 8 = 24"
                    }
                ]
            },
            {
                id: 11,
                title: "Problem-Solving with Ratios",
                category: "Math",
                description: "Master percentage calculations, unit conversions, and scaling problems.",
                content: `
                    <h4>Ratio and Proportion Skills:</h4>
                    <ul>
                        <li>Setting up proportions</li>
                        <li>Percentage increase/decrease</li>
                        <li>Unit conversions</li>
                        <li>Scale factor problems</li>
                    </ul>
                    <h4>Common Formulas:</h4>
                    <p>Percentage change = (new - old)/old × 100%<br>
                    Proportion: a/b = c/d means ad = bc</p>
                `,
                quiz: [
                    {
                        question: "If 3 apples cost $2, how much do 12 apples cost?",
                        answers: ["$6", "$8", "$10", "$4"],
                        correct: 1,
                        explanation: "Set up proportion: 3/$2 = 12/x. Cross multiply: 3x = 24, so x = $8"
                    }
                ]
            },
            {
                id: 12,
                title: "Mathematical Modeling",
                category: "Math",
                description: "Practice translating word problems into mathematical equations and interpreting solutions.",
                content: `
                    <h4>Modeling Steps:</h4>
                    <ul>
                        <li>Identify variables and constraints</li>
                        <li>Translate words to equations</li>
                        <li>Solve the mathematical model</li>
                        <li>Interpret results in context</li>
                    </ul>
                    <h4>Common Models:</h4>
                    <p>Linear models for constant rates, exponential for growth/decay, quadratic for optimization problems.</p>
                `,
                quiz: [
                    {
                        question: "A car travels at 60 mph. Which equation models distance (d) after time (t) hours?",
                        answers: ["d = 60 + t", "d = 60t", "d = t/60", "d = 60 - t"],
                        correct: 1,
                        explanation: "Distance = rate × time, so d = 60t where 60 is the rate in mph."
                    }
                ]
            }
        ];

        // Initialize the app
        function initApp() {
            loadAppState();
            renderTopics();
            updateProgress();
            updateTimer();
        }

        // Load saved state from localStorage
        function loadAppState() {
            // Note: In a real deployment, you'd use localStorage
            // For this demo, we'll use in-memory storage
        }

        // Save state to localStorage
        function saveAppState() {
            // Note: In a real deployment, you'd use localStorage
            // For this demo, we'll keep state in memory
        }

        // Render all topics
        function renderTopics() {
            const grid = document.getElementById('topicsGrid');
            grid.innerHTML = '';

            satTopics.forEach(topic => {
                const topicCard = document.createElement('div');
                topicCard.className = `topic-card ${appState.completedTopics.has(topic.id) ? 'completed' : ''}`;
                
                topicCard.innerHTML = `
                    <div class="topic-header">
                        <div>
                            <div class="topic-title">${topic.title}</div>
                            <div class="topic-category">${topic.category}</div>
                        </div>
                    </div>
                    <div class="topic-description">${topic.description}</div>
                    <div class="topic-actions">
                        <button class="btn btn-primary" onclick="openStudy(${topic.id})">Study</button>
                        <button class="btn btn-secondary" onclick="openQuiz(${topic.id})">Quiz</button>
                        ${appState.completedTopics.has(topic.id) ? '<span style="color: #48bb78;">✓ Completed</span>' : ''}
                    </div>
                `;
                
                grid.appendChild(topicCard);
            });
        }

        // Open study modal
        function openStudy(topicId) {
            const topic = satTopics.find(t => t.id === topicId);
            document.getElementById('modalTitle').textContent = topic.title;
            document.getElementById('modalContent').innerHTML = `
                <div class="topic-category">${topic.category}</div>
                <div style="margin: 20px 0;">${topic.content}</div>
                <button class="btn btn-primary" onclick="markCompleted(${topicId})">Mark as Completed</button>
            `;
            document.getElementById('studyModal').style.display = 'block';
        }

        // Open quiz modal
        function openQuiz(topicId) {
            const topic = satTopics.find(t => t.id === topicId);
            appState.currentQuiz = topic.quiz;
            appState.currentQuestionIndex = 0;
            document.getElementById('modalTitle').textContent = `${topic.title} - Quiz`;
            renderQuizQuestion();
            document.getElementById('studyModal').style.display = 'block';
        }

        // Render current quiz question
        function renderQuizQuestion() {
            const quiz = appState.currentQuiz;
            const question = quiz[appState.currentQuestionIndex];
            
            document.getElementById('modalContent').innerHTML = `
                <div class="question-card">
                    <div class="quiz-progress">Question ${appState.currentQuestionIndex + 1} of ${quiz.length}</div>
                    <div class="question-text">${question.question}</div>
                    <div class="answers">
                        ${question.answers.map((answer, index) => `
                            <div class="answer-option" onclick="selectAnswer(${index})">
                                ${String.fromCharCode(65 + index)}. ${answer}
                            </div>
                        `).join('')}
                    </div>
                    <div class="quiz-controls">
                        <button class="btn btn-secondary" onclick="closeModal()">Exit Quiz</button>
                        <button class="btn btn-primary" id="nextBtn" onclick="nextQuestion()" style="display: none;">Next Question</button>
                    </div>
                </div>
            `;
        }

        // Select an answer
        function selectAnswer(answerIndex) {
            const answers = document.querySelectorAll('.answer-option');
            answers.forEach(answer => answer.classList.remove('selected'));
            answers[answerIndex].classList.add('selected');
            
            // Show correct/incorrect after selection
            setTimeout(() => {
                const question = appState.currentQuiz[appState.currentQuestionIndex];
                answers.forEach((answer, index) => {
                    if (index === question.correct) {
                        answer.classList.add('correct');
                    } else if (index === answerIndex && index !== question.correct) {
                        answer.classList.add('incorrect');
                    }
                });
                
                // Show explanation
                const explanation = document.createElement('div');
                explanation.innerHTML = `<p style="margin-top: 15px; padding: 10px; background: #f7fafc; border-radius: 5px;"><strong>Explanation:</strong> ${question.explanation}</p>`;
                document.querySelector('.question-card').appendChild(explanation);
                
                document.getElementById('nextBtn').style.display = 'inline-block';
            }, 500);
        }

        // Next question or finish quiz
        function nextQuestion() {
            appState.currentQuestionIndex++;
            if (appState.currentQuestionIndex < appState.currentQuiz.length) {
                renderQuizQuestion();
            } else {
                // Quiz finished
                document.getElementById('modalContent').innerHTML = `
                    <div style="text-align: center; padding: 40px;">
                        <h3>🎉 Quiz Completed!</h3>
                        <p>Great job studying this topic!</p>
                        <button class="btn btn-primary" onclick="closeModal()">Close</button>
                    </div>
                `;
            }
        }

        // Mark topic as completed
        function markCompleted(topicId) {
            appState.completedTopics.add(topicId);
            renderTopics();
            updateProgress();
            closeModal();
            saveAppState();
        }

        // Update progress display
        function updateProgress() {
            const completed = appState.completedTopics.size;
            const total = satTopics.length;
            const percentage = (completed / total) * 100;
            
            document.getElementById('overallProgress').style.width = `${percentage}%`;
            document.getElementById('completedTopics').textContent = `${completed} / ${total}`;
            document.getElementById('totalStudyTime').textContent = `${appState.studyTime} min`;
            document.getElementById('averageScore').textContent = appState.quizScores.length > 0 
                ? `${Math.round(appState.quizScores.reduce((a, b) => a + b, 0) / appState.quizScores.length)}%`
                : '0%';
            document.getElementById('studyStreak').textContent = `${appState.streak} days`;
        }

        // Timer functions
        function updateTimer() {
            const minutes = Math.floor(appState.currentTime / 60);
            const seconds = appState.currentTime % 60;
            document.getElementById('timerDisplay').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function startTimer() {
            if (!appState.isTimerRunning) {
                appState.isTimerRunning = true;
                appState.timerInterval = setInterval(() => {
                    if (appState.currentTime > 0) {
                        appState.currentTime--;
                        updateTimer();
                    } else {
                        // Timer finished
                        pauseTimer();
                        alert('🎉 Study session complete! Great job!');
                        appState.studyTime += 25; // Add to total study time
                        updateProgress();
                        resetTimer();
                    }
                }, 1000);
            }
        }

        function pauseTimer() {
            appState.isTimerRunning = false;
            if (appState.timerInterval) {
                clearInterval(appState.timerInterval);
                appState.timerInterval = null;
            }
        }

        function resetTimer() {
            pauseTimer();
            appState.currentTime = 25 * 60;
            updateTimer();
        }

        function setTimer(minutes) {
            pauseTimer();
            appState.currentTime = minutes * 60;
            updateTimer();
        }

        // Modal functions
        function closeModal() {
            document.getElementById('studyModal').style.display = 'none';
            appState.currentQuiz = null;
            appState.currentQuestionIndex = 0;
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('studyModal');
            if (event.target === modal) {
                closeModal();
            }
        };

        // Initialize app when page loads
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>