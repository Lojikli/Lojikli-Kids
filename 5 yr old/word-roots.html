<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word Roots Genius</title>
    <style>
        body {
            font-family: 'Comic Sans MS', sans-serif;
            background-color: #f0f8ff;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        #game-container {
            width: 800px;
            max-width: 100%;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
            padding: 20px;
            margin: 20px;
            position: relative;
            min-height: 500px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .screen {
            display: none;
            width: 100%;
            text-align: center;
        }

        .active {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #home-screen {
            justify-content: center;
        }

        #game-screen {
            justify-content: space-between;
        }

        h1 {
            color: #4b6cb7;
            font-size: 32px;
            margin-bottom: 30px;
        }

        .language-btn {
            padding: 12px 24px;
            margin: 10px;
            font-size: 18px;
            background-color: #4b6cb7;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            width: 200px;
        }

        .language-btn:hover {
            background-color: #3a5795;
            transform: scale(1.05);
        }

        #question {
            font-size: 24px;
            margin: 20px 0;
            padding: 10px;
            border-radius: 10px;
            background-color: #e6f2ff;
        }

        #options-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin: 20px 0;
        }

        .option-wrapper {
            margin: 10px;
            text-align: center;
        }

        .option-btn {
            padding: 15px;
            width: 180px;
            font-size: 16px;
            background-color: #e6f2ff;
            border: 2px solid #4b6cb7;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .option-btn:hover {
            background-color: #d1e5ff;
        }

        .key-hint {
            margin-top: 5px;
            font-size: 12px;
            color: #666;
        }

        .correct {
            background-color: #aaffaa !important;
        }

        .incorrect {
            background-color: #ffaaaa !important;
        }

        #controls {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .control-btn {
            padding: 10px 20px;
            margin: 10px;
            font-size: 16px;
            background-color: #4b6cb7;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }

        .control-btn:hover {
            background-color: #3a5795;
        }

        #score-display {
            font-size: 18px;
            margin: 10px 0;
            color: #4b6cb7;
        }

        .background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 15px;
            opacity: 0.1;
            z-index: -1;
        }

        .background.home {
            background: linear-gradient(135deg, #83a4d4, #b6fbff);
        }

        .background.greek {
            background: linear-gradient(135deg, #a8c0ff, #3f2b96);
        }

        .background.latin {
            background: linear-gradient(135deg, #f46b45, #eea849);
        }

        .background.french {
            background: linear-gradient(135deg, #00c6ff, #0072ff);
        }

        .background.old-english {
            background: linear-gradient(135deg, #8e9eab, #eef2f3);
        }

        .background.mixed {
            background: linear-gradient(135deg, #67b26f, #4ca2cd);
        }

        .background.spanish {
            background: linear-gradient(135deg, #f12711, #f5af19);
        }

        /* Message box styles */
        #message-box {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        #message-content {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            max-width: 400px;
            text-align: center;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
        }

        #message-title {
            font-size: 22px;
            color: #4b6cb7;
            margin-bottom: 15px;
        }

        #message-text {
            font-size: 18px;
            margin-bottom: 20px;
        }

        #message-button {
            padding: 10px 20px;
            background-color: #4b6cb7;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }

        #message-button:hover {
            background-color: #3a5795;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="home-screen" class="screen active">
            <div class="background home"></div>
            <h1>Word Roots Genius</h1>
            <div id="language-selection">
                <button class="language-btn" data-language="Greek">Greek</button>
                <button class="language-btn" data-language="Latin">Latin</button>
                <button class="language-btn" data-language="French">French</button>
                <button class="language-btn" data-language="Old English">Old English</button>
                <button class="language-btn" data-language="Spanish">Spanish</button>
                <button class="language-btn" data-language="Mixed">Mixed</button>
            </div>
        </div>

        <div id="game-screen" class="screen">
            <div class="background" id="game-background"></div>
            <div id="score-display">Score: 0</div>
            <div id="question"></div>
            <div id="options-container">
                <div class="option-wrapper">
                    <button class="option-btn" id="option0"></button>
                    <div class="key-hint">a</div>
                </div>
                <div class="option-wrapper">
                    <button class="option-btn" id="option1"></button>
                    <div class="key-hint">s</div>
                </div>
                <div class="option-wrapper">
                    <button class="option-btn" id="option2"></button>
                    <div class="key-hint">d</div>
                </div>
                <div class="option-wrapper">
                    <button class="option-btn" id="option3"></button>
                    <div class="key-hint">f</div>
                </div>
            </div>
            <div id="controls">
                <button class="control-btn" id="hint-btn">Show Hint (h)</button>
                <button class="control-btn" id="next-btn">Next Question (n)</button>
                <button class="control-btn" id="home-btn">Back to Home</button>
                <button class="control-btn" id="exit-btn">Exit</button>
            </div>
        </div>
    </div>

    <div id="message-box">
        <div id="message-content">
            <div id="message-title">Title</div>
            <div id="message-text">Message text goes here.</div>
            <button id="message-button">OK</button>
        </div>
    </div>

    <script>
        // Word roots data
        const wordRoots = {
            'Greek': {
                'Anthropo': 'Human', 'Helios': 'Sun', 'Geo': 'Earth',
                'Astro': 'Star', 'Bio': 'Life', 'Chrono': 'Time',
                'Cracy': 'Government', 'Demo': 'People', 'Graph': 'Write',
                'Logy': 'Study of', 'Meter': 'Measure', 'Micro': 'Small',
                'Phobia': 'Fear', 'Photo': 'Light', 'Pseudo': 'False',
                'Psycho': 'Mind', 'Scope': 'Look', 'Tele': 'Far',
                'Thermo': 'Heat', 'Hydro': 'Water', 'Kilo': 'Thousand',
                'Mega': 'Large', 'Neuro': 'Nerve', 'Pathy': 'Feeling',
                'Phono': 'Sound', 'Poly': 'Many', 'Pyro': 'Fire',
                'Sophy': 'Wisdom', 'Syn': 'Together', 'Therm': 'Heat',
                'Topo': 'Place', 'Typo': 'Type', 'Zoo': 'Animal',
                'Baro': 'Pressure', 'Chromo': 'Color', 'Cosmo': 'World or Universe',
                'Crypto': 'Hidden', 'Cyclo': 'Circle', 'Gyno': 'Woman',
                'Gyro': 'Turn', 'Helio': 'Sun', 'Hemo': 'Blood',
                'Hyper': 'Over', 'Hypo': 'Under', 'Litho': 'Stone',
                'Morpho': 'Form', 'Necro': 'Death', 'Octo': 'Eight',
                'Odon': 'Tooth', 'Oligo': 'Few or Small', 'Onc': 'Tumor',
                'Ophthalm': 'Eye', 'Ortho': 'Straight', 'Osteo': 'Bone',
                'Paleo': 'Old', 'Pan': 'All', 'Penta': 'Five',
                'Peri': 'Around', 'Phag': 'Eat', 'Phil': 'Love',
                'Phon': 'Sound', 'Plasm': 'Form', 'Proto': 'First',
                'Sclero': 'Hard', 'Soph': 'Wisdom', 'Sphere': 'Ball',
                'Stasis': 'Standing', 'Steno': 'Narrow', 'Stereo': 'Solid',
                'Stomy': 'Opening', 'Tachy': 'Fast', 'Taxo': 'Arrangement',
                'Techno': 'Art', 'Tecto': 'Roof', 'Tetra': 'Four',
                'Toxo': 'Poison', 'Tricho': 'Hair', 'Troph': 'Nourishment',
                'Xeno': 'Foreign', 'Xero': 'Dry', 'Xylo': 'Wood',
                'Zygo': 'Pair'
            },
            'Latin': {
                'Aqua': 'Water', 'Terra': 'Land', 'Audi': 'Hear',
                'Bene': 'Good', 'Cent': 'Hundred', 'Circum': 'Around',
                'Contra': 'Against', 'Dict': 'Say', 'Duc': 'Lead',
                'Fac': 'Make', 'Fract': 'Break', 'Ject': 'Throw',
                'Mal': 'Bad', 'Port': 'Carry', 'Scrib': 'Write',
                'Spect': 'Look', 'Tact': 'Touch', 'Ver': 'True',
                'Vict': 'Conquer', 'Voc': 'Call', 'Ambi': 'Both',
                'Anim': 'Life', 'Ann': 'Year', 'Ante': 'Before',
                'Anti': 'Against', 'Bell': 'War', 'Brev': 'Short',
                'Cede': 'Go', 'Ceed': 'Go', 'Cess': 'Yield',
                'Corp': 'Body', 'Cred': 'Believe', 'Curs': 'Run',
                'Cur': 'Care for', 'De': 'Down', 'Demo': 'People',
                'Dent': 'Tooth', 'Derma': 'Skin', 'Dom': 'Home',
                'Don': 'Give', 'Equi': 'Equal', 'Ex': 'Out',
                'Extra': 'Beyond', 'Fid': 'Faith', 'Fin': 'End',
                'Flex': 'Bend', 'Flect': 'Bend', 'Flu': 'Flow',
                'Form': 'Shape', 'Funct': 'Perform', 'Gen': 'Birth',
                'Grad': 'Step', 'Gress': 'Step', 'Hab': 'Hold',
                'Habit': 'Live', 'Hem': 'Blood', 'Herb': 'Grass',
                'Homo': 'Same', 'Hum': 'Earth', 'Hydr': 'Water',
                'Ignis': 'Fire', 'Jur': 'Swear', 'Lect': 'Gather',
                'Leg': 'Law', 'Lev': 'Light', 'Liber': 'Free',
                'Lith': 'Stone', 'Loc': 'Place', 'Log': 'Word',
                'Loqu': 'Talk', 'Lum': 'Light', 'Manu': 'Hand',
                'Mater': 'Mother', 'Matri': 'Mother', 'Medi': 'Middle',
                'Metr': 'Measure', 'Migr': 'Wander', 'Mit': 'Send',
                'Mitt': 'Send', 'Mort': 'Death', 'Multi': 'Many',
                'Nomen': 'Name', 'Non': 'Not', 'Nov': 'New',
                'Omni': 'All', 'Pater': 'Father', 'Patri': 'Father',
                'Ped': 'Foot', 'Pend': 'Hang', 'Pens': 'Hang',
                'Phil': 'Love', 'Phob': 'Fear', 'Photo': 'Light',
                'Plex': 'Weave', 'Plic': 'Fold', 'Post': 'After',
                'Pre': 'Before', 'Punct': 'Point', 'Reg': 'Rule',
                'Retro': 'Backward', 'Rupt': 'Break', 'Script': 'Write',
                'Sect': 'Cut', 'Sed': 'Sit', 'Sens': 'Feel',
                'Sign': 'Sign', 'Spec': 'Look', 'Spir': 'Breathe',
                'Struct': 'Build', 'Tang': 'Touch', 'Temp': 'Time',
                'Tend': 'Stretch', 'Tens': 'Stretch', 'Test': 'Witness',
                'Theo': 'God', 'Tract': 'Pull', 'Trans': 'Across',
                'Uni': 'One', 'Vac': 'Empty', 'Vale': 'Worth',
                'Veni': 'Come', 'Vent': 'Come', 'Verb': 'Word',
                'Vers': 'Turn', 'Vert': 'Turn', 'Vinc': 'Conquer',
                'Viv': 'Live', 'Vol': 'Will', 'Volcan': 'Fire',
                'Volu': 'Roll', 'Vor': 'Eat', 'Zo': 'Animal'
            },
            'French': {
                'Beau': 'Beautiful', 'Terre': 'Earth', 'Eau': 'Water',
                'Femme': 'Woman', 'Homme': 'Man', 'Jeune': 'Young',
                'Mont': 'Mountain', 'Pays': 'Country', 'Petit': 'Small',
                'Rouge': 'Red', 'Ville': 'City', 'Voiture': 'Car',
                'Jour': 'Day', 'Nuit': 'Night', 'Chateau': 'Castle',
                'Forêt': 'Forest', 'Mer': 'Sea', 'Plage': 'Beach',
                'Fleur': 'Flower', 'Soleil': 'Sun', 'Lune': 'Moon',
                'Étoile': 'Star', 'Ciel': 'Sky', 'Nuage': 'Cloud',
                'Vent': 'Wind', 'Neige': 'Snow', 'Pluie': 'Rain',
                'Rivière': 'River', 'Lac': 'Lake', 'Océan': 'Ocean',
                'Bois': 'Wood', 'Jardin': 'Garden', 'Arbre': 'Tree',
                'Feuille': 'Leaf', 'Fruit': 'Fruit', 'Pierre': 'Stone',
                'Sable': 'Sand', 'Feu': 'Fire', 'Glace': 'Ice',
                'Chemin': 'Path', 'Route': 'Road', 'Pont': 'Bridge',
                'Maison': 'House', 'Chambre': 'Room', 'Porte': 'Door',
                'Fenêtre': 'Window', 'Toit': 'Roof', 'Mur': 'Wall',
                'Sol': 'Floor', 'Table': 'Table', 'Chaise': 'Chair',
                'Lit': 'Bed', 'Bateau': 'Boat', 'Train': 'Train',
                'Avion': 'Plane', 'Vélo': 'Bicycle', 'Couleur': 'Color',
                'Forme': 'Shape', 'Rond': 'Round', 'Carré': 'Square',
                'Triangle': 'Triangle', 'Animal': 'Animal', 'Chien': 'Dog',
                'Chat': 'Cat', 'Oiseau': 'Bird', 'Poisson': 'Fish',
                'Cheval': 'Horse', 'Vache': 'Cow', 'Cochon': 'Pig',
                'Rat': 'Rat', 'Abeille': 'Bee', 'Papillon': 'Butterfly',
                'Fourmi': 'Ant', 'Araignée': 'Spider', 'Serpent': 'Snake',
                'Grenouille': 'Frog', 'Tortue': 'Turtle', 'Dinosaure': 'Dinosaur',
                'Licorne': 'Unicorn', 'Dragon': 'Dragon', 'Fantôme': 'Ghost',
                'Sorcière': 'Witch', 'Magie': 'Magic', 'Pirate': 'Pirate',
                'Chevalier': 'Knight', 'Princesse': 'Princess', 'Roi': 'King',
                'Reine': 'Queen', 'Artisan': 'Craftsman', 'Ballet': 'Dance',
                'Bouquet': 'Flowers', 'Brigade': 'Military unit', 'Bureau': 'Office',
                'Café': 'Coffee', 'Camouflage': 'Disguise', 'Canard': 'Duck, hoax',
                'Chanson': 'Song', 'Chic': 'Stylish', 'Collage': 'Art form',
                'Connoisseur': 'Expert', 'Couture': 'Fashion', 'Critique': 'Review',
                'Debris': 'Remains', 'Début': 'First appearance', 'Décor': 'Decoration'
            },
            'Old English': {
                'Barn': 'Child', 'Hus': 'House', 'Boc': 'Book',
                'Feld': 'Field', 'Leah': 'Meadow', 'Stede': 'Place',
                'Tun': 'Town', 'Wic': 'Village', 'Worth': 'Enclosure',
                'Ham': 'Home', 'Stan': 'Stone', 'Treow': 'Tree',
                'Brook': 'Stream', 'Burna': 'Stream', 'Eg': 'Island',
                'Holt': 'Forest', 'Mere': 'Lake', 'Ac': 'Oak',
                'Beorht': 'Bright', 'Ceorl': 'Churl, Free Peasant', 'Cumb': 'Valley',
                'Denu': 'Valley', 'Dun': 'Hill', 'Fen': 'Marsh',
                'Ford': 'Ford', 'Graf': 'Grove', 'Halig': 'Holy',
                'Hamm': 'Enclosure', 'Hara': 'Hare', 'Hlaw': 'Hill',
                'Hrycg': 'Ridge', 'Ing': 'People', 'Lacu': 'Stream',
                'Lang': 'Long', 'Lind': 'Lime Tree', 'Mead': 'Meadow',
                'Myl': 'Mill', 'Ofer': 'Bank', 'Pleg': 'Play',
                'Pul': 'Pool', 'Rum': 'Space', 'Ryge': 'Rye',
                'Sceadu': 'Shade', 'Sceaga': 'Shaw', 'Sloh': 'Slough',
                'Smit': 'Forge', 'Steorr': 'Star', 'Stig': 'Path',
                'Stow': 'Place', 'Straet': 'Street', 'Swan': 'Swain',
                'Thegn': 'Thane', 'Thorn': 'Thorn', 'Thorp': 'Village',
                'Weald': 'Forest', 'Weard': 'Guard', 'Weg': 'Way',
                'Wella': 'Well', 'Wiell': 'Well', 'Wudu': 'Wood',
                'Wyrm': 'Dragon', 'Yfel': 'Evil', 'Aesc': 'Ash Tree',
                'Bearu': 'Grove', 'Beck': 'Stream', 'Berg': 'Hill',
                'Burg': 'Fortress', 'Byrig': 'Fortress', 'Clif': 'Cliff',
                'Cot': 'Cottage', 'Cragg': 'Rock', 'Dael': 'Dale'
            },
            'Spanish': {
                'Amigo': 'Friend', 'Amor': 'Love', 'Animar': 'Encourage',
                'Biblioteca': 'Library', 'Cantar': 'Sing', 'Casa': 'House',
                'Comer': 'Eat', 'Escuela': 'School', 'Familia': 'Family',
                'Feliz': 'Happy', 'Gato': 'Cat', 'Hablar': 'Speak',
                'Iglesia': 'Church', 'Jugar': 'Play', 'Libro': 'Book',
                'Maestro': 'Teacher', 'Mar': 'Sea', 'Montaña': 'Mountain',
                'Música': 'Music', 'Niño': 'Child', 'Paz': 'Peace',
                'Perro': 'Dog', 'Puerta': 'Door', 'Rey': 'King',
                'Río': 'River', 'Sol': 'Sun', 'Tiempo': 'Time',
                'Viento': 'Wind', 'Vino': 'Wine', 'Vivir': 'Live',
                'Hola': 'Hello', 'Adiós': 'Goodbye', 'Por favor': 'Please',
                'Gracias': 'Thank you', 'Lo siento': 'I am sorry',
                '¿Cómo estás?': 'How are you?', 'Estoy bien, gracias': 'I am fine, thank you',
                'Buenos días': 'Good morning', 'Buenas tardes': 'Good afternoon',
                'Buenas noches': 'Good evening / Good night', 'Padre / Papá': 'Father / Dad',
                'Madre / Mamá': 'Mother / Mom', 'Hermano': 'Brother',
                'Hermana': 'Sister', 'Abuelo': 'Grandfather', 'Abuela': 'Grandmother',
                'Niño': 'Boy', 'Niña': 'Girl', 'Uno': 'One',
                'Dos': 'Two', 'Tres': 'Three', 'Rojo': 'Red',
                'Azul': 'Blue', 'Verde': 'Green', 'Amarillo': 'Yellow',
                'Negro': 'Black', 'Blanco': 'White', 'Agua': 'Water',
                'Pan': 'Bread', 'Leche': 'Milk', 'Manzana': 'Apple',
                'Queso': 'Cheese', 'Pollo': 'Chicken'
            }
        };

        // Game variables
        let selectedLanguage = '';
        let currentWord = '';
        let correctAnswer = '';
        let score = 0;
        let hintCounter = 0;
        let optionButtons = [];

        // DOM elements
        const homeScreen = document.getElementById('home-screen');
        const gameScreen = document.getElementById('game-screen');
        const gameBackground = document.getElementById('game-background');
        const questionElement = document.getElementById('question');
        const scoreDisplay = document.getElementById('score-display');
        const hintButton = document.getElementById('hint-btn');
        const nextButton = document.getElementById('next-btn');
        const homeButton = document.getElementById('home-btn');
        const exitButton = document.getElementById('exit-btn');
        const messageBox = document.getElementById('message-box');
        const messageTitle = document.getElementById('message-title');
        const messageText = document.getElementById('message-text');
        const messageButton = document.getElementById('message-button');

        // Get option buttons
        for (let i = 0; i < 4; i++) {
            optionButtons.push(document.getElementById(`option${i}`));
        }

        // Initialize the game
        function init() {
            // Add event listeners to language buttons
            document.querySelectorAll('.language-btn').forEach(button => {
                button.addEventListener('click', function() {
                    selectedLanguage = this.getAttribute('data-language');
                    startGame();
                });
            });

            // Game control buttons
            hintButton.addEventListener('click', showHint);
            nextButton.addEventListener('click', nextQuestion);
            homeButton.addEventListener('click', returnToHome);
            exitButton.addEventListener('click', exitGame);
            messageButton.addEventListener('click', closeMessage);

            // Option buttons
            optionButtons.forEach(button => {
                button.addEventListener('click', function() {
                    checkAnswer(this.textContent, this);
                });
            });

            // Keyboard shortcuts
            document.addEventListener('keydown', function(event) {
                if (gameScreen.classList.contains('active')) {
                    switch(event.key) {
                        case 'a':
                            if (optionButtons[0].textContent) optionButtons[0].click();
                            break;
                        case 's':
                            if (optionButtons[1].textContent) optionButtons[1].click();
                            break;
                        case 'd':
                            if (optionButtons[2].textContent) optionButtons[2].click();
                            break;
                        case 'f':
                            if (optionButtons[3].textContent) optionButtons[3].click();
                            break;
                        case 'h':
                            hintButton.click();
                            break;
                        case 'n':
                            nextButton.click();
                            break;
                    }
                }
            });

            // Show welcome message after a brief delay
            setTimeout(showWelcomeMessage, 500);
        }

        // Switch screens
        function switchScreen(from, to) {
            from.classList.remove('active');
            to.classList.add('active');
        }

        // Start the game with selected language
        function startGame() {
            switchScreen(homeScreen, gameScreen);
            setBackground(selectedLanguage);
            score = 0;
            updateScore();
            nextQuestion();
        }

        // Set background based on selected language
        function setBackground(language) {
            gameBackground.className = 'background';
            gameBackground.classList.add(language.toLowerCase().replace(' ', '-'));
        }

        // Show welcome message
        function showWelcomeMessage() {
            showMessage(
                "Welcome!",
                "Welcome to Word Roots Genius!\nLearn about Greek, Latin, French, Old English, and Spanish word roots.\nTry to guess the meaning of each word root presented.",
                "Start"
            );
        }

        // Generate a random word and its meaning
        function generateWordAndMeaning() {
            let language;
            if (selectedLanguage === 'Mixed') {
                const languages = Object.keys(wordRoots);
                language = languages[Math.floor(Math.random() * languages.length)];
            } else {
                language = selectedLanguage;
            }

            const words = Object.keys(wordRoots[language]);
            const word = words[Math.floor(Math.random() * words.length)];
            const meaning = wordRoots[language][word];

            return { word, meaning, language };
        }

        // Generate distractor answers (wrong options)
        function generateDistractors(correctAnswer) {
            const distractors = new Set();
            const allMeanings = [];
            
            // Collect all meanings from all languages
            for (const language in wordRoots) {
                for (const word in wordRoots[language]) {
                    allMeanings.push(wordRoots[language][word]);
                }
            }
            
            // Generate unique distractors
            while (distractors.size < 3) {
                const randomMeaning = allMeanings[Math.floor(Math.random() * allMeanings.length)];
                if (randomMeaning !== correctAnswer) {
                    distractors.add(randomMeaning);
                }
            }
            
            return Array.from(distractors);
        }

        // Show the next question
        function nextQuestion() {
            // Reset button styles and hint counter
            resetButtonStyles();
            hintCounter = 0;
            
            // Generate a new word and get its meaning
            const { word, meaning } = generateWordAndMeaning();
            currentWord = word;
            correctAnswer = meaning;
            
            // Generate wrong options and shuffle all options
            const distractors = generateDistractors(correctAnswer);
            const options = [correctAnswer, ...distractors];
            shuffleArray(options);
            
            // Update the UI
            questionElement.textContent = `What is the meaning of the word: '${word}'?`;
            optionButtons.forEach((button, index) => {
                button.textContent = options[index];
            });
        }

        // Check the selected answer
        function checkAnswer(selectedOption, button) {
            resetButtonStyles();
            
            if (selectedOption === correctAnswer) {
                // Correct answer
                button.classList.add('correct');
                score++;
                updateScore();
                showMessage("Correct!", `Well done! You got it right.\nYour score: ${score}`, "Next");
            } else {
                // Incorrect answer
                button.classList.add('incorrect');
                // Highlight the correct answer
                optionButtons.forEach(btn => {
                    if (btn.textContent === correctAnswer) {
                        btn.classList.add('correct');
                    }
                });
                showMessage("Incorrect", `Oops! That's not correct.\nThe correct answer is ${correctAnswer}.`, "Next");
            }
        }

        // Show hint
        function showHint() {
            const hints = [
                `The meaning of the word is related to '${correctAnswer.toLowerCase()}'.`,
                `The first letter of the meaning is '${correctAnswer[0].toUpperCase()}'.`,
                "It's something you might learn about in school."
            ];

            if (hintCounter < hints.length) {
                showMessage("Hint", hints[hintCounter], "Ok");
                hintCounter++;
            } else {
                showMessage("Hint", "No more hints! Give it your best guess.", "Ok");
            }
        }

        // Return to home screen
        function returnToHome() {
            switchScreen(gameScreen, homeScreen);
        }

        // Exit the game
        function exitGame() {
            showMessage(
                "Goodbye!",
                `Your final score is ${score}!\nKeep practicing to learn more word roots.`,
                "Close",
                function() {
                    closeMessage();
                    returnToHome();
                }
            );
        }

        // Update score display
        function updateScore() {
            scoreDisplay.textContent = `Score: ${score}`;
        }

        // Reset button styles
        function resetButtonStyles() {
            optionButtons.forEach(button => {
                button.classList.remove('correct', 'incorrect');
            });
        }

        // Show message box
        function showMessage(title, text, buttonText, callback) {
            messageTitle.textContent = title;
            messageText.textContent = text;
            messageButton.textContent = buttonText;
            messageBox.style.display = 'flex';
            
            // Set callback function for the button
            if (callback) {
                messageButton.onclick = callback;
            } else {
                messageButton.onclick = closeMessage;
            }
        }

        // Close message box
        function closeMessage() {
            messageBox.style.display = 'none';
        }

        // Shuffle array (Fisher-Yates algorithm)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Initialize the game
        init();
    </script>
</body>
</html>
