<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Learning Portal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #34495e;
            --success-color: #2ecc71;
            --card-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            --transition-speed: 0.3s;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--light-color);
            color: var(--primary-color);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background-color: var(--primary-color);
            color: white;
            padding: 20px 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            display: flex;
            align-items: center;
        }

        .logo i {
            margin-right: 10px;
            color: var(--secondary-color);
        }

        .search-bar {
            display: flex;
            background: white;
            border-radius: 50px;
            padding: 8px 15px;
            width: 300px;
            box-shadow: var(--card-shadow);
        }

        .search-bar input {
            border: none;
            background: transparent;
            width: 100%;
            outline: none;
            font-size: 1rem;
            padding-left: 5px;
        }

        .search-bar button {
            background: transparent;
            border: none;
            cursor: pointer;
            color: var(--secondary-color);
        }

        .main-content {
            padding: 40px 0;
        }

        .repo-info {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: var(--card-shadow);
        }

        .repo-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .repo-title {
            font-size: 1.4rem;
            color: var(--primary-color);
            font-weight: bold;
        }

        .repo-stats {
            display: flex;
            gap: 15px;
        }

        .stat {
            display: flex;
            align-items: center;
            font-size: 0.9rem;
            color: var(--dark-color);
        }

        .stat i {
            margin-right: 5px;
            color: var(--secondary-color);
        }

        .filters {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .filter-group {
            display: flex;
            gap: 10px;
        }

        .filter-btn {
            background-color: white;
            border: 1px solid #ddd;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: all var(--transition-speed);
            font-size: 0.9rem;
        }

        .filter-btn:hover, .filter-btn.active {
            background-color: var(--secondary-color);
            color: white;
            border-color: var(--secondary-color);
        }

        .view-toggle {
            display: flex;
            gap: 5px;
        }

        .view-btn {
            background-color: white;
            border: 1px solid #ddd;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            cursor: pointer;
            transition: all var(--transition-speed);
        }

        .view-btn:hover, .view-btn.active {
            background-color: var(--secondary-color);
            color: white;
            border-color: var(--secondary-color);
        }

        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }

        .games-list {
            display: none;
            flex-direction: column;
            gap: 10px;
        }

        .game-card {
            background-color: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
            transition: transform var(--transition-speed);
        }

        .game-card:hover {
            transform: translateY(-5px);
        }

        .game-img {
            height: 150px;
            background-color: #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-color);
            font-size: 3rem;
        }

        .game-content {
            padding: 15px;
        }

        .game-title {
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--primary-color);
        }

        .game-desc {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 15px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .game-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.8rem;
            color: #888;
        }

        .game-tags {
            display: flex;
            gap: 5px;
        }

        .game-tag {
            background-color: var(--light-color);
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 0.7rem;
        }

        .game-date {
            display: flex;
            align-items: center;
        }

        .game-date i {
            margin-right: 5px;
        }

        .game-list-item {
            background-color: white;
            border-radius: 10px;
            padding: 15px;
            box-shadow: var(--card-shadow);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: transform var(--transition-speed);
        }

        .game-list-item:hover {
            transform: translateX(5px);
        }

        .game-list-content {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .game-list-icon {
            background-color: var(--light-color);
            width: 50px;
            height: 50px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: var(--secondary-color);
        }

        .game-list-info {
            display: flex;
            flex-direction: column;
        }

        .game-list-title {
            font-weight: bold;
            color: var(--primary-color);
        }

        .game-list-meta {
            font-size: 0.8rem;
            color: #888;
        }

        .game-list-actions {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            background-color: var(--light-color);
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all var(--transition-speed);
            color: var(--primary-color);
        }

        .action-btn:hover {
            background-color: var(--secondary-color);
            color: white;
        }

        .play-btn {
            background-color: var(--secondary-color);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            font-weight: 500;
            font-size: 0.9rem;
            transition: all var(--transition-speed);
            border: none;
            cursor: pointer;
        }

        .play-btn:hover {
            background-color: var(--primary-color);
        }

        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
            flex-direction: column;
            gap: 20px;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--secondary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .loading-text {
            color: var(--primary-color);
            font-size: 1.2rem;
        }

        .error-container {
            background-color: #ffecec;
            border-left: 5px solid var(--accent-color);
            padding: 20px;
            border-radius: 5px;
            margin: 20px 0;
            display: none;
        }

        .error-title {
            color: var(--accent-color);
            font-weight: bold;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .error-message {
            color: #555;
            margin-bottom: 15px;
        }

        .retry-btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background var(--transition-speed);
        }

        .retry-btn:hover {
            background-color: #c0392b;
        }

        .empty-state {
            text-align: center;
            padding: 50px 20px;
            display: none;
        }

        .empty-icon {
            font-size: 3rem;
            color: #ccc;
            margin-bottom: 20px;
        }

        .empty-title {
            font-size: 1.5rem;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .empty-message {
            color: #777;
            max-width: 500px;
            margin: 0 auto 20px;
        }

        footer {
            background-color: var(--primary-color);
            color: white;
            padding: 30px 0;
            margin-top: 40px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 30px;
        }

        .footer-section h3 {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--secondary-color);
        }

        .footer-section p {
            font-size: 0.9rem;
            color: #bbb;
            line-height: 1.6;
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 10px;
        }

        .footer-links a {
            color: #bbb;
            text-decoration: none;
            transition: color var(--transition-speed);
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .footer-links a:hover {
            color: var(--secondary-color);
        }

        .copyright {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #4a5c6a;
            font-size: 0.9rem;
            color: #bbb;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive styles */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }

            .search-bar {
                width: 100%;
            }

            .repo-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            .footer-content {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 550px) {
            .filters {
                flex-direction: column;
            }

            .filter-group {
                width: 100%;
                overflow-x: auto;
                padding-bottom: 10px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container header-content">
            <div class="logo">
                <i class="fas fa-robot"></i>
                <span>Interactive Learning Portal</span>
            </div>
            <div class="search-bar">
                <input type="text" id="search-input" placeholder="Search games...">
                <button id="search-btn"><i class="fas fa-search"></i></button>
            </div>
        </div>
    </header>

    <div class="container main-content">
        <div class="repo-info">
            <div class="repo-header">
                <div class="repo-title">
                    <i class="fab fa-github"></i> <span id="repo-name">Loading repository...</span>
                </div>
                <div class="repo-stats">
                    <div class="stat">
                        <i class="fas fa-code"></i> <span id="html-count">0</span> HTML files
                    </div>
                    <div class="stat">
                        <i class="fas fa-gamepad"></i> <span id="game-count">0</span> Games
                    </div>
                    <div class="stat">
                        <i class="fas fa-clock"></i> Last updated <span id="last-updated">recently</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="filters">
            <div class="filter-group">
                <button class="filter-btn active" data-filter="all">All Games</button>
                <button class="filter-btn" data-filter="puzzle">Puzzle</button>
                <button class="filter-btn" data-filter="logic">Logic</button>
                <button class="filter-btn" data-filter="math">Math</button>
                <button class="filter-btn" data-filter="coding">Coding</button>
            </div>
            <div class="view-toggle">
                <button class="view-btn active" id="grid-view">
                    <i class="fas fa-th-large"></i>
                </button>
                <button class="view-btn" id="list-view">
                    <i class="fas fa-list"></i>
                </button>
            </div>
        </div>

        <div id="loading" class="loading">
            <div class="loading-spinner"></div>
            <div class="loading-text">Loading repository contents...</div>
        </div>

        <div id="error-container" class="error-container">
            <div class="error-title">
                <i class="fas fa-exclamation-circle"></i>
                <span>Oops! Something went wrong</span>
            </div>
            <div id="error-message" class="error-message">
                We couldn't load the repository contents. Please check your configuration and try again.
            </div>
            <button id="retry-btn" class="retry-btn">Try again</button>
        </div>

        <div id="empty-state" class="empty-state">
            <div class="empty-icon">
                <i class="fas fa-folder-open"></i>
            </div>
            <h2 class="empty-title">No HTML games found</h2>
            <p class="empty-message">
                We couldn't find any HTML game files in this repository. 
                Make sure your repository contains HTML files with game content.
            </p>
        </div>

        <div id="games-grid" class="games-grid"></div>
        <div id="games-list" class="games-list"></div>
    </div>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>About This Portal</h3>
                    <p>
                        This Interactive Learning Portal provides access to a collection of educational games 
                        designed to challenge young minds while making learning fun and engaging. 
                        All games are accessible directly from our GitHub repository.
                    </p>
                </div>
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="#"><i class="fas fa-home"></i> Home</a></li>
                        <li><a href="#" id="github-repo-link"><i class="fab fa-github"></i> Repository</a></li>
                        <li><a href="#"><i class="fas fa-book"></i> Documentation</a></li>
                        <li><a href="#"><i class="fas fa-question-circle"></i> Help & Support</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Learning Resources</h3>
                    <ul class="footer-links">
                        <li><a href="#"><i class="fas fa-graduation-cap"></i> Educational Articles</a></li>
                        <li><a href="#"><i class="fas fa-code"></i> Coding Tutorials</a></li>
                        <li><a href="#"><i class="fas fa-puzzle-piece"></i> Logic Puzzles</a></li>
                        <li><a href="#"><i class="fas fa-calculator"></i> Math Challenges</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                &copy; <span id="current-year">2025</span> Interactive Learning Portal. All rights reserved.
            </div>
        </div>
    </footer>

    <script>
        // Configuration - Replace these with your actual GitHub repository details
        const config = {
            username: 'lojikli', // GitHub username
            repository: 'Kids-Educational-WebApps', // Repository name
            branch: 'main', // Branch name (usually 'main' or 'master')
            subfolder: '' // Subfolder path if games are in a subfolder (leave empty if in root)
        };

        // DOM Elements
        const loadingElement = document.getElementById('loading');
        const errorContainer = document.getElementById('error-container');
        const errorMessage = document.getElementById('error-message');
        const emptyState = document.getElementById('empty-state');
        const gamesGrid = document.getElementById('games-grid');
        const gamesList = document.getElementById('games-list');
        const retryButton = document.getElementById('retry-btn');
        const gridViewBtn = document.getElementById('grid-view');
        const listViewBtn = document.getElementById('list-view');
        const searchInput = document.getElementById('search-input');
        const searchBtn = document.getElementById('search-btn');
        const repoNameElement = document.getElementById('repo-name');
        const htmlCountElement = document.getElementById('html-count');
        const gameCountElement = document.getElementById('game-count');
        const lastUpdatedElement = document.getElementById('last-updated');
        const githubRepoLink = document.getElementById('github-repo-link');
        const currentYearElement = document.getElementById('current-year');
        const filterButtons = document.querySelectorAll('.filter-btn');

        // Set current year
        currentYearElement.textContent = new Date().getFullYear();

        // State management
        let allGames = [];
        let filteredGames = [];
        let currentFilter = 'all';
        let currentView = 'grid';
        let searchTerm = '';

        // Initialize the app
        function init() {
            setupEventListeners();
            updateRepoInfo();
            fetchRepositoryContents();
        }

        // Setup event listeners
        function setupEventListeners() {
            // View toggle
            gridViewBtn.addEventListener('click', () => {
                setView('grid');
            });

            listViewBtn.addEventListener('click', () => {
                setView('list');
            });

            // Search
            searchBtn.addEventListener('click', handleSearch);
            searchInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') {
                    handleSearch();
                }
            });

            // Retry button
            retryButton.addEventListener('click', fetchRepositoryContents);

            // Filter buttons
            filterButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    currentFilter = btn.dataset.filter;
                    filterButtons.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    filterGames();
                });
            });
        }

        // Update repository information
        function updateRepoInfo() {
            repoNameElement.textContent = `${config.username}/${config.repository}`;
            githubRepoLink.href = `https://github.com/${config.username}/${config.repository}`;
        }

        // Fetch repository contents
        function fetchRepositoryContents() {
            showLoading();
            hideError();
            hideEmptyState();

            let apiUrl = `https://api.github.com/repos/lojikli/Kids-Educational-WebApps/contents`;
            if (config.subfolder) {
                apiUrl += `/${config.subfolder}`;
            }

            fetch(apiUrl)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`GitHub API responded with status: ${response.status}`);
                    }
                    return response.json();
                })
                .then(data => {
                    processRepositoryContents(data);
                })
                .catch(error => {
                    console.error('Error fetching repository contents:', error);
                    showError(error.message);
                });
        }

        // Process repository contents
        function processRepositoryContents(contents) {
            const htmlFiles = contents.filter(item => 
                item.type === 'file' && 
                item.name.toLowerCase().endsWith('.html') && 
                item.name.toLowerCase() !== 'index.html'
            );

            htmlCountElement.textContent = htmlFiles.length;
            
            if (htmlFiles.length === 0) {
                showEmptyState();
                hideLoading();
                return;
            }

            // Get additional metadata for each file
            Promise.all(htmlFiles.map(file => getFileMetadata(file)))
                .then(gamesWithMetadata => {
                    allGames = gamesWithMetadata;
                    gameCountElement.textContent = allGames.length;
                    updateLastUpdated();
                    filterGames();
                    hideLoading();
                })
                .catch(error => {
                    console.error('Error getting file metadata:', error);
                    showError('Failed to load game metadata');
                });
        }

        // Get metadata for a file
        function getFileMetadata(file) {
            // For demo purposes, creating mock metadata
            // In a real implementation, you could fetch the file to extract more metadata
            const categories = ['puzzle', 'logic', 'math', 'coding'];
            const category = categories[Math.floor(Math.random() * categories.length)];
            
            // Parse filename to create a friendly title
            const title = file.name
                .replace('.html', '')
                .split(/[-_]/)
                .map(word => word.charAt(0).toUpperCase() + word.slice(1))
                .join(' ');

            return {
                name: file.name,
                title: title,
                path: file.path,
                url: file.html_url,
                download_url: file.download_url,
                category: category,
                dateAdded: new Date(Date.now() - Math.random() * 30 * 24 * 60 * 60 * 1000).toISOString(),
                size: file.size,
                description: `An interactive ${category} game designed to challenge and entertain.`
            };
        }

        // Update last updated date
        function updateLastUpdated() {
            if (allGames.length > 0) {
                const mostRecent = allGames.reduce((latest, game) => {
                    return new Date(game.dateAdded) > new Date(latest.dateAdded) ? game : latest;
                }, allGames[0]);
                
                const date = new Date(mostRecent.dateAdded);
                lastUpdatedElement.textContent = formatDate(date);
            }
        }

        // Format date
        function formatDate(date) {
            const now = new Date();
            const diff = now - date;
            const day = 24 * 60 * 60 * 1000;
            
            if (diff < day) {
                return 'today';
            } else if (diff < 2 * day) {
                return 'yesterday';
            } else if (diff < 7 * day) {
                return `${Math.floor(diff / day)} days ago`;
            } else {
                return date.toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric'
                });
            }
        }

        // Filter games by current filter and search term
        function filterGames() {
            filteredGames = allGames.filter(game => {
                const matchesFilter = currentFilter === 'all' || game.category === currentFilter;
                const matchesSearch = !searchTerm || 
                    game.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
                    game.description.toLowerCase().includes(searchTerm.toLowerCase());
                return matchesFilter && matchesSearch;
            });

            renderGames();
        }

        // Handle search
        function handleSearch() {
            searchTerm = searchInput.value.trim();
            filterGames();
        }

        // Set view mode (grid or list)
        function setView(view) {
            currentView = view;
            
            if (view === 'grid') {
                gridViewBtn.classList.add('active');
                listViewBtn.classList.remove('active');
                gamesGrid.style.display = 'grid';
                gamesList.style.display = 'none';
            } else {
                gridViewBtn.classList.remove('active');
                listViewBtn.classList.add('active');
                gamesGrid.style.display = 'none';
                gamesList.style.display = 'flex';
            }
            
            renderGames();
        }

        // Render games in the current view
        function renderGames() {
            gamesGrid.innerHTML = '';
            gamesList.innerHTML = '';
            
            if (filteredGames.length === 0) {
                showEmptyState();
                return;
            }
            
            hideEmptyState();
            
            filteredGames.forEach(game => {
                gamesGrid.appendChild(createGameCard(game));
                gamesList.appendChild(createGameListItem(game));
            });
        }

        // Create a game card for grid view
        function createGameCard(game) {
            const card = document.createElement('div');
            card.className = 'game-card';
            
            // Use Font Awesome icon based on category
            let icon;
            switch (game.category) {
                case 'puzzle': icon = 'puzzle-piece'; break;
                case 'logic': icon = 'brain'; break;
                case 'math': icon = 'calculator'; break;
                case 'coding': icon = 'code'; break;
                default: icon = 'gamepad';
            }
            
            card.innerHTML = `
                <div class="game-img">
                    <i class="fas fa-${icon}"></i>
                </div>
                <div class="game-content">
                    <h3 class="game-title">${game.title}</h3>
                    <p class="game-desc">${game.description}</p>
                    <div class="game-meta">
                        <div class="game-tags">
                            <span class="game-tag">${game.category}</span>
                        </div>
                        <div class="game-date">
                            <i class="far fa-calendar-alt"></i> ${formatDate(new Date(game.dateAdded))}
                        </div>
                    </div>
                    <div style="margin-top: 15px; text-align: right;">
                        <a href="${game.download_url}" target="_blank" class="play-btn">
                            <i class="fas fa-play"></i> Play Now
                        </a>
                    </div>
                </div>
            `;
            
            return card;
        }

        // Create a game list item for list view
        function createGameListItem(game) {
            const item = document.createElement('div');
            item.className = 'game-list-item';
            
            // Use Font Awesome icon based on category
            let icon;
            switch (game.category) {
                case 'puzzle': icon = 'puzzle-piece'; break;
                case 'logic': icon = 'brain'; break;
                case 'math': icon = 'calculator'; break;
                case 'coding': icon = 'code'; break;
                default: icon = 'gamepad';
            }
            
            item.innerHTML = `
                <div class="game-list-content">
                    <div class="game-list-icon">
                        <i class="fas fa-${icon}"></i>
                    </div>
                    <div class="game-list-info">
                        <div class="game-list-title">${game.title}</div>
                        <div class="game-list-meta">
                            <span>${game.category}</span> • Added ${formatDate(new Date(game.dateAdded))}
                        </div>
                    </div>
                </div>
                <div class="game-list-actions">
                    <a href="${game.download_url}" target="_blank" class="play-btn">
                        <i class="fas fa-play"></i> Play
                    </a>
                </div>
            `;
            
            return item;
        }

        // Show loading state
        function showLoading() {
            loadingElement.style.display = 'flex';
        }

        // Hide loading state
        function hideLoading() {
            loadingElement.style.display = 'none';
        }

        // Show error state
        function showError(message) {
            errorContainer.style.display = 'block';
            errorMessage.textContent = message || 'An unknown error occurred.';
            hideLoading();
        }

        // Hide error state
        function hideError() {
            errorContainer.style.display = 'none';
        }

        // Show empty state
        function showEmptyState() {
            emptyState.style.display = 'block';
        }

        // Hide empty state
        function hideEmptyState() {
            emptyState.style.display = 'none';
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
