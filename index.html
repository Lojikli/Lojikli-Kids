<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lojikli Kids Learning Adventure</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@700&family=Nunito:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #FF6B6B;
            --secondary-color: #4ECDC4;
            --accent1-color: #FFD166;
            --accent2-color: #6A5ACD;
            --accent3-color: #06D6A0;
            --math-color: #FF6B6B;
            --science-color: #4ECDC4;
            --music-color: #FFD166;
            --language-color: #6A5ACD;
            --geography-color: #06D6A0;
            --games-color: #FC76AF;
            --logic-color: #43BCCD;
            --physics-color: #EAC435;
            --dark-color: #292F36;
            --light-color: #F7FFF7;
            --shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
            --bubble-shadow: 0 8px 0 rgba(0, 0, 0, 0.1);
            --transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--light-color);
            color: var(--dark-color);
            line-height: 1.6;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%2399E2B4' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E");
            overflow-x: hidden;
        }

        header {
            background: linear-gradient(135deg, var(--primary-color), var(--accent2-color));
            color: white;
            padding: 0.8rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: var(--shadow);
            position: relative;
            z-index: 10;
        }

        .header-title {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo {
            width: 50px;
            height: 50px;
            background-color: var(--accent1-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            box-shadow: var(--shadow);
        }

        h1 {
            font-family: 'Comic Neue', cursive;
            font-weight: 700;
            font-size: 2rem;
            position: relative;
            z-index: 1;
            color: white;
            margin: 0;
        }

        .header-controls {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .search-container {
            position: relative;
            width: 250px;
        }

        .search-box {
            width: 100%;
            padding: 0.6rem 1rem;
            border: none;
            border-radius: 50px;
            font-size: 0.9rem;
            font-family: 'Nunito', sans-serif;
            font-weight: 600;
            color: var(--dark-color);
            background-color: white;
            transition: var(--transition);
            box-shadow: var(--shadow);
        }

        .search-box:focus {
            outline: none;
            box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.2);
        }

        .search-icon {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.1rem;
            color: var(--accent2-color);
            pointer-events: none;
        }

        .age-toggle {
            display: flex;
            gap: 0.5rem;
        }

        .age-toggle-btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 50px;
            background-color: var(--accent1-color);
            color: var(--dark-color);
            font-family: 'Nunito', sans-serif;
            font-weight: 800;
            font-size: 0.9rem;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow);
        }

        .age-toggle-btn.active {
            background-color: white;
            color: var(--accent2-color);
        }

        .age-toggle-btn:hover {
            transform: translateY(-2px);
        }

        .category-nav {
            background-color: white;
            padding: 0.5rem;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 0.5rem;
            box-shadow: 0 2px 6px rgba(0,0,0,0.08);
            position: sticky;
            top: 0;
            z-index: 9;
        }

        .category-btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 50px;
            font-family: 'Nunito', sans-serif;
            font-weight: 700;
            font-size: 0.9rem;
            cursor: pointer;
            color: white;
            transition: var(--transition);
        }

        .category-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(0,0,0,0.1);
        }

        .main-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
        }

        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .game-card {
            background-color: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            position: relative;
            height: 190px;
            display: flex;
            flex-direction: column;
            border: 3px solid;
            animation: pop-in 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
            opacity: 0;
        }

        .game-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 15px 25px rgba(0, 0, 0, 0.15);
        }

        .game-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 8px;
        }

        .game-card a {
            padding: 1.2rem;
            text-decoration: none;
            color: var(--dark-color);
            font-weight: 600;
            display: flex;
            flex-direction: column;
            height: 100%;
            justify-content: space-between;
            position: relative;
            z-index: 1;
        }

        .game-card .game-title {
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            font-weight: 800;
            font-family: 'Comic Neue', cursive;
        }

        .game-card .game-description {
            font-size: 0.9rem;
            color: #666;
            flex-grow: 1;
        }

        .game-card .age-tag {
            display: inline-block;
            background-color: var(--accent1-color);
            color: var(--dark-color);
            padding: 0.3rem 0.8rem;
            border-radius: 50px;
            font-size: 0.8rem;
            margin-top: 0.8rem;
            align-self: flex-start;
            font-weight: 800;
            box-shadow: 2px 2px 0 rgba(0,0,0,0.1);
        }

        .game-card::after {
            content: '👉';
            position: absolute;
            right: 15px;
            bottom: 15px;
            font-size: 1.2rem;
            opacity: 0;
            transition: var(--transition);
            transform: translateX(-10px);
        }

        .game-card:hover::after {
            opacity: 1;
            transform: translateX(0);
        }

        .section-title {
            font-family: 'Comic Neue', cursive;
            font-weight: 700;
            font-size: 1.5rem;
            padding: 0.5rem 1.5rem;
            border-radius: 50px;
            color: white;
            display: inline-block;
            margin: 1.2rem 0 0.8rem 0;
        }

        /* Category specific styling */
        .math-card { border-color: var(--math-color); }
        .science-card { border-color: var(--science-color); }
        .music-card { border-color: var(--music-color); }
        .language-card { border-color: var(--language-color); }
        .geography-card { border-color: var(--geography-color); }
        .games-card { border-color: var(--games-color); }
        .logic-card { border-color: var(--logic-color); }
        .physics-card { border-color: var(--physics-color); }

        .math-card::before { background: var(--math-color); }
        .science-card::before { background: var(--science-color); }
        .music-card::before { background: var(--music-color); }
        .language-card::before { background: var(--language-color); }
        .geography-card::before { background: var(--geography-color); }
        .games-card::before { background: var(--games-color); }
        .logic-card::before { background: var(--logic-color); }
        .physics-card::before { background: var(--physics-color); }

        .math-card .game-title { color: var(--math-color); }
        .science-card .game-title { color: var(--science-color); }
        .music-card .game-title { color: var(--music-color); }
        .language-card .game-title { color: var(--language-color); }
        .geography-card .game-title { color: var(--geography-color); }
        .games-card .game-title { color: var(--games-color); }
        .logic-card .game-title { color: var(--logic-color); }
        .physics-card .game-title { color: var(--physics-color); }

        .math-btn { background-color: var(--math-color); }
        .science-btn { background-color: var(--science-color); }
        .music-btn { background-color: var(--music-color); }
        .language-btn { background-color: var(--language-color); }
        .geography-btn { background-color: var(--geography-color); }
        .games-btn { background-color: var(--games-color); }
        .logic-btn { background-color: var(--logic-color); }
        .physics-btn { background-color: var(--physics-color); }

        .category-math { background-color: var(--math-color); }
        .category-science { background-color: var(--science-color); }
        .category-music { background-color: var(--music-color); }
        .category-language { background-color: var(--language-color); }
        .category-geography { background-color: var(--geography-color); }
        .category-games { background-color: var(--games-color); }
        .category-logic { background-color: var(--logic-color); }
        .category-physics { background-color: var(--physics-color); }

        /* Loading and error states */
        .loading {
            text-align: center;
            padding: 1.5rem;
            font-size: 1.2rem;
            color: var(--accent2-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }

        .loading::after {
            content: '';
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--accent2-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            display: block;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error {
            padding: 1.5rem;
            background-color: #FFD166;
            color: var(--dark-color);
            border-radius: 15px;
            text-align: center;
            margin: 1rem 0;
            border: 3px dashed #FF6B6B;
            position: relative;
            box-shadow: var(--shadow);
        }

        .error::before {
            content: '😥';
            font-size: 2rem;
            display: block;
            margin-bottom: 0.5rem;
        }

        /* Animation for cards */
        @keyframes pop-in {
            0% {
                opacity: 0;
                transform: scale(0.5) translateY(30px);
            }
            70% {
                transform: scale(1.05) translateY(-5px);
            }
            100% {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        /* Back to top button */
        #backToTop {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 45px;
            height: 45px;
            background-color: var(--accent2-color);
            color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            font-size: 1.5rem;
            box-shadow: var(--shadow);
            opacity: 0;
            transition: var(--transition);
            z-index: 100;
        }

        #backToTop.visible {
            opacity: 1;
        }

        /* Footer */
        footer {
            background-color: var(--accent2-color);
            color: white;
            padding: 1rem;
            text-align: center;
            margin-top: 2rem;
            font-size: 0.9rem;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            header {
                flex-direction: column;
                padding: 0.8rem;
                gap: 0.8rem;
            }

            .header-controls {
                width: 100%;
                justify-content: center;
                flex-wrap: wrap;
            }

            .search-container {
                width: 100%;
                max-width: 300px;
            }

            .age-toggle {
                margin-bottom: 0.5rem;
            }

            .category-btn {
                font-size: 0.8rem;
                padding: 0.4rem 0.8rem;
            }

            .section-title {
                font-size: 1.3rem;
                padding: 0.4rem 1rem;
            }
            
            .games-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 1.5rem;
            }
            
            .logo {
                width: 40px;
                height: 40px;
                font-size: 18px;
            }
            
            .age-toggle-btn {
                font-size: 0.8rem;
                padding: 0.4rem 0.8rem;
            }
            
            .category-nav {
                gap: 0.3rem;
                padding: 0.3rem;
            }
            
            .category-btn {
                font-size: 0.7rem;
                padding: 0.3rem 0.6rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-title">
            <div class="logo">L</div>
            <h1>Lojikli Kids Adventure</h1>
        </div>
        <div class="header-controls">
            <div class="age-toggle">
                <button class="age-toggle-btn" data-age="2">2 Years</button>
                <button class="age-toggle-btn active" data-age="5">5 Years</button>
            </div>
            <div class="search-container">
                <input type="text" class="search-box" id="searchBox" placeholder="Find a game...">
                <span class="search-icon">🔍</span>
            </div>
        </div>
    </header>

    <nav class="category-nav" id="categoryNav">
        <button class="category-btn math-btn" data-category="math">Math</button>
        <button class="category-btn science-btn" data-category="science">Science</button>
        <button class="category-btn music-btn" data-category="music">Music</button>
        <button class="category-btn language-btn" data-category="language">Language</button>
        <button class="category-btn geography-btn" data-category="geography">Geography</button>
        <button class="category-btn games-btn" data-category="fun">Games</button>
        <button class="category-btn logic-btn" data-category="logic">Logic</button>
        <button class="category-btn physics-btn" data-category="physics">Physics</button>
    </nav>

    <main class="main-container">
        <!-- All Games Section First -->
        <div id="all-games">
            <div class="section-title category-games">All Games</div>
            <div class="games-grid" id="all-games-grid">
                <div class="loading">Loading games...</div>
            </div>
        </div>

        <!-- Individual Category Sections -->
        <div id="math-section" style="display: none;">
            <div class="section-title category-math">Math Games</div>
            <div class="games-grid" id="math-games-grid"></div>
        </div>

        <div id="science-section" style="display: none;">
            <div class="section-title category-science">Science Games</div>
            <div class="games-grid" id="science-games-grid"></div>
        </div>

        <div id="music-section" style="display: none;">
            <div class="section-title category-music">Music Games</div>
            <div class="games-grid" id="music-games-grid"></div>
        </div>

        <div id="language-section" style="display: none;">
            <div class="section-title category-language">Language Games</div>
            <div class="games-grid" id="language-games-grid"></div>
        </div>

        <div id="geography-section" style="display: none;">
            <div class="section-title category-geography">Geography Games</div>
            <div class="games-grid" id="geography-games-grid"></div>
        </div>

        <div id="fun-section" style="display: none;">
            <div class="section-title category-games">Fun Games</div>
            <div class="games-grid" id="fun-games-grid"></div>
        </div>

        <div id="logic-section" style="display: none;">
            <div class="section-title category-logic">Logic Games</div>
            <div class="games-grid" id="logic-games-grid"></div>
        </div>

        <div id="physics-section" style="display: none;">
            <div class="section-title category-physics">Physics Games</div>
            <div class="games-grid" id="physics-games-grid"></div>
        </div>
    </main>

    <div id="backToTop">↑</div>

    <footer>
        <p>Lojikli Learning Adventures &copy; 2025 | Made with ❤️ for curious minds</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const searchBox = document.getElementById('searchBox');
            const ageToggleBtns = document.querySelectorAll('.age-toggle-btn');
            const categoryBtns = document.querySelectorAll('.category-btn');
            const backToTopBtn = document.getElementById('backToTop');
            const allGamesGrid = document.getElementById('all-games-grid');
            const mathGamesGrid = document.getElementById('math-games-grid');
            const scienceGamesGrid = document.getElementById('science-games-grid');
            const musicGamesGrid = document.getElementById('music-games-grid');
            const languageGamesGrid = document.getElementById('language-games-grid');
            const geographyGamesGrid = document.getElementById('geography-games-grid');
            const funGamesGrid = document.getElementById('fun-games-grid');
            const logicGamesGrid = document.getElementById('logic-games-grid');
            const physicsGamesGrid = document.getElementById('physics-games-grid');
            
            // State
            let allGames = [];
            let activeAge = '5'; // Default to 5-year-olds
            let activeCategory = 'all'; // Default to showing all games
            
            // Keywords for categorization
            const categoryKeywords = {
                math: ['math', 'addition', 'subtraction', 'multiplication', 'division', 'algebra', 'geometry', 
                      'calculus', 'fraction', 'decimal', 'percentage', 'number', 'arithmetic', 'zero'],
                science: ['science', 'chemistry', 'biology', 'experiment', 'lab'],
                music: ['music', 'piano', 'instrument', 'note', 'rhythm', 'harmony', 'chord', 'melody', 'midi'],
                language: ['word', 'letter', 'reading', 'spelling', 'vocabulary', 'grammar', 'language', 'scramble'],
                geography: ['geography', 'map', 'country', 'continent', 'globe', 'world'],
                fun: ['game', 'memory', 'cards', 'fun', 'play', 'bubble', 'pop', 'snake', 'ladder', 'trouble', 'battleship', 'solitaire'],
                logic: ['logic', 'puzzle', 'brain', 'maze', 'pathfinder', 'pipe', 'soduku', 'connect4', 'dot', 'minesweeper', 'hexcell'],
                physics: ['physics', 'quantum', 'vector', 'scalar', 'perspective', 'neural', 'tech', 'asteroid', 'planet', 'lander']
            };

            // Event Listeners
            ageToggleBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    ageToggleBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    activeAge = btn.getAttribute('data-age');
                    
                    // Reload games for the selected age
                    loadGamesForAge(activeAge);
                });
            });

            categoryBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const category = btn.getAttribute('data-category');
                    switchCategory(category);
                });
            });

            searchBox.addEventListener('input', handleSearch);

            // Back to top button
            window.addEventListener('scroll', () => {
                if (window.scrollY > 300) {
                    backToTopBtn.classList.add('visible');
                } else {
                    backToTopBtn.classList.remove('visible');
                }
            });

            backToTopBtn.addEventListener('click', () => {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });

            // Function to switch between categories
            function switchCategory(category) {
                activeCategory = category;
                
                // Hide all sections
                document.querySelectorAll('main > div').forEach(section => {
                    section.style.display = 'none';
                });
                
                // Show the relevant section
                if (category === 'all') {
                    document.getElementById('all-games').style.display = 'block';
                } else {
                    document.getElementById(`${category}-section`).style.display = 'block';
                }
                
                // Update active button
                categoryBtns.forEach(btn => {
                    if (btn.getAttribute('data-category') === category) {
                        btn.classList.add('active');
                    } else {
                        btn.classList.remove('active');
                    }
                });
            }

            // Function to handle search
            function handleSearch() {
                const searchTerm = searchBox.value.toLowerCase();
                
                if (searchTerm.length < 2) {
                    // If search term is too short, restore original categorization
                    categorizeGames(allGames);
                    return;
                }
                
                const filteredGames = allGames.filter(game => {
                    return formatTitle(game.name).toLowerCase().includes(searchTerm);
                });
                
                // Show all games section and update with filtered results
                switchCategory('all');
                
                // Clear the grid
                allGamesGrid.innerHTML = '';
                
                // If no games found with search term
                if (filteredGames.length === 0) {
                    allGamesGrid.innerHTML = `
                        <div class="error">
                            <p>No games found matching "${searchTerm}"</p>
                        </div>
                    `;
                    return;
                }
                
                // Display filtered games
                displayGames(filteredGames, allGamesGrid, determineCardClass);
            }

            // Function to determine the appropriate card class based on game name
            function determineCardClass(gameName) {
                const lowerName = gameName.toLowerCase();
                
                for (const [category, keywords] of Object.entries(categoryKeywords)) {
                    if (keywords.some(keyword => lowerName.includes(keyword))) {
                        switch(category) {
                            case 'math': return 'math-card';
                            case 'science': return 'science-card';
                            case 'music': return 'music-card';
                            case 'language': return 'language-card';
                            case 'geography': return 'geography-card';
                            case 'fun': return 'games-card';
                            case 'logic': return 'logic-card';
                            case 'physics': return 'physics-card';
                        }
                    }
                }
                
                // Default to games card if no match
                return 'games-card';
            }

            // Function to load games for a specific age
            function loadGamesForAge(age) {
                // Reset all game grids
                const grids = [
                    allGamesGrid, mathGamesGrid, scienceGamesGrid, musicGamesGrid, 
                    languageGamesGrid, geographyGamesGrid, funGamesGrid, 
                    logicGamesGrid, physicsGamesGrid
                ];
                
                grids.forEach(grid => {
                    grid.innerHTML = '<div class="loading">Loading games...</div>';
                });
                
                const basePath = age === '2' ? '2 yr old' : '5 yr old';
                
                // Since we're loading a static file without an API, use hardcoded file list
                const gameFiles = [
                    { name: 'AIpathfinderV2.html', path: `${basePath}/AIpathfinderV2.html` },
                    { name: 'area-volume-game.html', path: `${basePath}/area-volume-game.html` },
                    { name: 'asteroidBlasterV03.html', path: `${basePath}/asteroidBlasterV03.html` },
                    { name: 'battleshipv7.html', path: `${basePath}/battleshipv7.html` },
                    { name: 'binomial-blocks-game.html', path: `${basePath}/binomial-blocks-game.html` },
                    { name: 'binomial-multiplication-game.html', path: `${basePath}/binomial-multiplication-game.html` },
                    { name: 'BubblePop2.0..html', path: `${basePath}/BubblePop2.0..html` },
                    { name: 'bubbleshooter v3 working.html', path: `${basePath}/bubbleshooter v3 working.html` },
                    { name: 'calculus-game.html', path: `${basePath}/calculus-game.html` },
                    { name: 'Circle of fifths.html', path: `${basePath}/Circle of fifths.html` },
                    { name: 'compareFractions v0.2.html', path: `${basePath}/compareFractions v0.2.html` },
                    { name: 'connect4.html', path: `${basePath}/connect4.html` },
                    { name: 'decimal add and subtract v0.1.html', path: `${basePath}/decimal add and subtract v0.1.html` },
                    { name: 'decimal multiply v0.1.html', path: `${basePath}/decimal multiply v0.1.html` },
                    { name: 'Distributive property greek.html', path: `${basePath}/Distributive property greek.html` },
                    { name: 'divisibility_rulesv_0.6.html', path: `${basePath}/divisibility_rulesv_0.6.html` },
                    { name: 'division-adventure-game.html', path: `${basePath}/division-adventure-game.html` },
                    { name: 'DotsGameV02.html', path: `${basePath}/DotsGameV02.html` },
                    { name: 'enhanced-division-game v3.html', path: `${basePath}/enhanced-division-game v3.html` },
                    { name: 'enhanced-mahjong v4.html', path: `${basePath}/enhanced-mahjong v4.html` },
                    { name: 'factortree_v2.html', path: `${basePath}/factortree_v2.html` },
                    { name: 'fraction-game.html', path: `${basePath}/fraction-game.html` },
                    { name: 'geo-genius-game.html', path: `${basePath}/geo-genius-game.html` },
                    { name: 'Guess country Globe v1.html', path: `${basePath}/Guess country Globe v1.html` },
                    { name: 'Guess country v9.html', path: `${basePath}/Guess country v9.html` },
                    { name: 'Hexcells_Minesweeper.html', path: `${basePath}/Hexcells_Minesweeper.html` },
                    { name: 'improved-multiplication-game.html', path: `${basePath}/improved-multiplication-game.html` },
                    { name: 'mahjong-learning-game.html', path: `${basePath}/mahjong-learning-game.html` },
                    { name: 'MIDI music painting v2 additional features.html', path: `${basePath}/MIDI music painting v2 additional features.html` },
                    { name: 'MIDI Note analyzer V5.2.html', path: `${basePath}/MIDI Note analyzer V5.2.html` },
                    { name: 'MidiHarmonicsMath v1.12.html', path: `${basePath}/MidiHarmonicsMath v1.12.html` },
                    { name: 'Multiplication flash cards.html', path: `${basePath}/Multiplication flash cards.html` },
                    { name: 'neural-learner-app.html', path: `${basePath}/neural-learner-app.html` },
                    { name: 'numberline_negatives.html', path: `${basePath}/numberline_negatives.html` },
                    { name: 'pacman-game.html', path: `${basePath}/pacman-game.html` },
                    { name: 'pemdas v0.html', path: `${basePath}/pemdas v0.html` },
                    { name: 'percentagesV0.html', path: `${basePath}/percentagesV0.html` },
                    { name: 'Piano Learning v5 with midi.html', path: `${basePath}/Piano Learning v5 with midi.html` },
                    { name: 'planetLanderV02.html', path: `${basePath}/planetLanderV02.html` },
                    { name: 'plot mx plus b v1.html', path: `${basePath}/plot mx plus b v1.html` },
                    { name: 'Read music.html', path: `${basePath}/Read music.html` },
                    { name: 'Reducing fractions with algebra v3.html', path: `${basePath}/Reducing fractions with algebra v3.html` },
                    { name: 'reducing fractions.html', path: `${basePath}/reducing fractions.html` },
                    { name: 'scientific-notation-game.html', path: `${basePath}/scientific-notation-game.html` },
                    { name: 'Short Division.html', path: `${basePath}/Short Division.html` },
                    { name: 'ShortDivisionV1.html', path: `${basePath}/ShortDivisionV1.html` },
                    { name: 'SliderPic.html', path: `${basePath}/SliderPic.html` },
                    { name: 'Snakes and laddersV02.html', path: `${basePath}/Snakes and laddersV02.html` },
                    { name: 'soduku.html', path: `${basePath}/soduku.html` },
                    { name: 'solitaire-game v2.html', path: `${basePath}/solitaire-game v2.html` },
                    { name: 'space-adventure-game.html', path: `${basePath}/space-adventure-game.html` },
                    { name: 'statistics-game v2.html', path: `${basePath}/statistics-game v2.html` },
                    { name: 'tech-explorer-game.html', path: `${basePath}/tech-explorer-game.html` },
                    { name: 'triangle-explorer-game.html', path: `${basePath}/triangle-explorer-game.html` },
                    { name: 'trig-adventure.html', path: `${basePath}/trig-adventure.html` },
                    { name: 'trinomial-factoring-game.html', path: `${basePath}/trinomial-factoring-game.html` },
                    { name: 'TroubleGameV1.html', path: `${basePath}/TroubleGameV1.html` },
                    { name: 'unit-conversion-game v2.html', path: `${basePath}/unit-conversion-game v2.html` },
                    { name: 'vector-scalar-game.html', path: `${basePath}/vector-scalar-game.html` },
                    { name: 'WordProblem_Mobile v0.html', path: `${basePath}/WordProblem_Mobile v0.html` },
                    { name: 'wordscramble.html', path: `${basePath}/wordscramble.html` },
                    { name: 'zeroProperty_v2.4.html', path: `${basePath}/zeroProperty_v2.4.html` },
                    // Add the new quantum game
                    { name: 'quantum-physics-game.html', path: `${basePath}/quantum-physics-game.html` }
                ];
                
                allGames = gameFiles;
                categorizeGames(allGames);
            }
            }

            // Function to categorize games
            function categorizeGames(games) {
                // Reset all categories
                const mathGames = [];
                const scienceGames = [];
                const musicGames = [];
                const languageGames = [];
                const geographyGames = [];
                const funGames = [];
                const logicGames = [];
                const physicsGames = [];
                
                games.forEach(game => {
                    const lowerName = game.name.toLowerCase();
                    let categorized = false;
                    
                    // Check each category
                    if (categoryKeywords.math.some(keyword => lowerName.includes(keyword))) {
                        mathGames.push(game);
                        categorized = true;
                    }
                    
                    if (categoryKeywords.science.some(keyword => lowerName.includes(keyword))) {
                        scienceGames.push(game);
                        categorized = true;
                    }
                    
                    if (categoryKeywords.music.some(keyword => lowerName.includes(keyword))) {
                        musicGames.push(game);
                        categorized = true;
                    }
                    
                    if (categoryKeywords.language.some(keyword => lowerName.includes(keyword))) {
                        languageGames.push(game);
                        categorized = true;
                    }
                    
                    if (categoryKeywords.geography.some(keyword => lowerName.includes(keyword))) {
                        geographyGames.push(game);
                        categorized = true;
                    }
                    
                    if (categoryKeywords.logic.some(keyword => lowerName.includes(keyword))) {
                        logicGames.push(game);
                        categorized = true;
                    }
                    
                    if (categoryKeywords.physics.some(keyword => lowerName.includes(keyword))) {
                        physicsGames.push(game);
                        categorized = true;
                    }
                    
                    if (!categorized || categoryKeywords.fun.some(keyword => lowerName.includes(keyword))) {
                        funGames.push(game);
                    }
                });
                
                // Display all games first
                displayGames(games, allGamesGrid, determineCardClass);
                
                // Display games in each category
                displayGames(mathGames, mathGamesGrid, () => 'math-card');
                displayGames(scienceGames, scienceGamesGrid, () => 'science-card');
                displayGames(musicGames, musicGamesGrid, () => 'music-card');
                displayGames(languageGames, languageGamesGrid, () => 'language-card');
                displayGames(geographyGames, geographyGamesGrid, () => 'geography-card');
                displayGames(funGames, funGamesGrid, () => 'games-card');
                displayGames(logicGames, logicGamesGrid, () => 'logic-card');
                displayGames(physicsGames, physicsGamesGrid, () => 'physics-card');
            }

            // Function to display games in a grid
            function displayGames(games, gridElement, cardClassFn) {
                if (games.length === 0) {
                    gridElement.innerHTML = `
                        <div class="error">
                            <p>No games found in this category.</p>
                        </div>
                    `;
                    return;
                }

                gridElement.innerHTML = '';
                
                games.forEach((game, index) => {
                    // Create a readable title from the filename
                    const readableTitle = formatTitle(game.name);
                    
                    // Create game description based on the name
                    const description = generateDescription(game.name, activeAge);
                    
                    // Card class based on the category
                    const cardClass = cardClassFn(game.name);
                    
                    const gameCard = document.createElement('div');
                    gameCard.className = `game-card ${cardClass}`;
                    gameCard.style.animationDelay = `${0.05 * index}s`;
                    
                    gameCard.innerHTML = `
                        <a href="${game.path}" target="_blank">
                            <div class="game-title">${readableTitle}</div>
                            <div class="game-description">${description}</div>
                            <span class="age-tag">Age ${activeAge}+</span>
                        </a>
                    `;
                    
                    gridElement.appendChild(gameCard);
                });
            }

            // Helper function to format title from filename
            function formatTitle(filename) {
                // Remove file extension
                let title = filename.replace('.html', '');
                
                // Replace hyphens and underscores with spaces
                title = title.replace(/[-_]/g, ' ');
                
                // Remove version numbers (v1, v2, etc.)
                title = title.replace(/\s+v\d+(\.\d+)?/i, '');
                
                // Title case
                title = title.split(' ').map(word => {
                    return word.charAt(0).toUpperCase() + word.slice(1);
                }).join(' ');
                
                return title;
            }

            // Helper function to generate descriptions
            function generateDescription(filename, age) {
                const lowerFilename = filename.toLowerCase();
                
                // Keywords to description mapping
                const descriptionMapping = {
                    'math': 'Learn math concepts through fun interactive activities',
                    'addition': 'Practice addition with engaging number challenges',
                    'subtraction': 'Master subtraction with colorful interactive problems',
                    'multiplication': 'Multiply numbers in this fun learning game',
                    'division': 'Practice division skills with step-by-step guidance',
                    'fraction': 'Learn about fractions through visual examples',
                    'decimal': 'Understand decimals with clear interactive examples',
                    'geometry': 'Explore shapes, angles and geometric concepts',
                    'algebra': 'Discover the basics of algebraic thinking',
                    'calculus': 'Introduction to calculus concepts for young minds',
                    'music': 'Create music and explore musical concepts',
                    'piano': 'Learn to play virtual piano keys and understand notes',
                    'note': 'Identify musical notes and build your music skills',
                    'country': 'Learn about different countries around the world',
                    'globe': 'Explore our planet with this interactive globe',
                    'language': 'Build vocabulary and language skills',
                    'word': 'Practice word skills and expand your vocabulary',
                    'puzzle': 'Solve puzzles that challenge your brain',
                    'maze': 'Navigate through mazes using logic and planning',
                    'connect': 'Connect pieces and develop strategic thinking',
                    'bubble': 'Pop bubbles in this fun and educational game',
                    'asteroid': 'Navigate through space dodging asteroids',
                    'battleship': 'Play the classic game of Battleship',
                    'soduku': 'Solve Sudoku puzzles adapted for young minds',
                    'snake': 'Play Snake and Ladders with a mathematical twist',
                    'quantum': 'Introduction to quantum concepts through play',
                    'neural': 'Learn about neural networks in a simple way',
                    'vector': 'Understand vectors through interactive visualization',
                    'factor': 'Find factors and learn about factorization',
                    'game': 'A fun game with educational benefits'
                };
                
                // Check for matching keywords
                for (const [keyword, description] of Object.entries(descriptionMapping)) {
                    if (lowerFilename.includes(keyword)) {
                        return description;
                    }
                }
                
                // Default description if no match
                return 'A fun learning activity for curious young minds';
            }

            // Initialize
            loadGamesForAge(activeAge);
        });
    </script>
</body>
</html>
